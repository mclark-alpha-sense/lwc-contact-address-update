<!-- sldsValidatorIgnore -->
<template>
    <lightning-quick-action-panel>

        <div class="slds-m-horizontal_medium">
            <h1 class="slds-text-heading_medium">Update Contacts</h1>
        </div>

        <div class="slds-m-around_medium" style="position:relative">
            <template lwc:if={contacts}>

                <div class="slds-grid slds-m-vertical_small">
                    <div class="slds-col slds-col_bump-right">
                        <lightning-button label="Copy Account Address" icon-name="utility:reassign" disabled={copyDisabled} onclick={handleCopy}></lightning-button>
                    </div>
                    <div class="slds-col">
                        <lightning-input variant="label-hidden" name="enter-search" placeholder="Search by name..." type="search"
                            onchange={handleSearch} is-loading={searchIsLoading}></lightning-input>
                    </div>
                </div>
                
                <div class="slds-grid slds-m-vertical_small">
                    <lightning-datatable key-field="Id" 
                        data={contacts} 
                        columns={columns} 
                        errors={errors} 
                        draft-values={draftValues} 
                        selected-rows={selectedRows}
                        sorted-direction={sortedDirection}
                        sorted-by={sortedBy}
                        
                        onsave={handleSave}
                        oncancel={handleCancel}
                        onrowselection={handleSelect} 
                        onsort={handleSort}
                        >
                    </lightning-datatable>
                </div>
            </template>

            <template lwc:if={error}>
                <pre>{error}</pre>
            </template>

            <template lwc:if={debug}>
                <pre>
                    Record       : {recordId}
                    Object       : {objectApiName}
                    Related List : {relatedListApiName}
                    where        : {where}
                </pre>
            </template>

            <template lwc:if={loading}>
                <lightning-spinner></lightning-spinner>
            </template>

        </div>

    </lightning-quick-action-panel>
</template>